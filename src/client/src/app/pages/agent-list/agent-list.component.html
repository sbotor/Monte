<mat-sidenav-container hasBackdrop="false" class="sidenav-container">
  <mat-sidenav #sidenav mode="over" position="end" class="sidenav" (closed)="onSidenavClosed()">
    <app-agent-details-drawer [agent]="agentDetails$ | async" (close)="sidenav.close()"></app-agent-details-drawer>
  </mat-sidenav>
  <mat-sidenav-content class="content-container">
    <div class="content">
      <h1>Agents</h1>
        @if (!isLoading()) {
          <table mat-table [dataSource]="agents$">
            <ng-container matColumnDef="displayName">
              <th mat-header-cell *matHeaderCellDef>Name</th>
              <td mat-cell *matCellDef="let element"><b>{{ element.displayName }}</b></td>
            </ng-container>

            <ng-container matColumnDef="id">
              <th mat-header-cell *matHeaderCellDef>ID</th>
              <td mat-cell *matCellDef="let element">{{ element.id }}</td>
            </ng-container>

            <ng-container matColumnDef="lastHeartbeat">
              <th mat-header-cell *matHeaderCellDef>Last heartbeat</th>
              <td mat-cell *matCellDef="let element">{{ element.lastHeartbeat | date:'medium' }}</td>
            </ng-container>

            <ng-container matColumnDef="created">
              <th mat-header-cell *matHeaderCellDef>Created</th>
              <td mat-cell *matCellDef="let element">{{ element.created | date:'medium' }}</td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="columns"></tr>
            <tr mat-row (click)="onClickedRow(row.id)" *matRowDef="let row; columns: columns"></tr>
          </table>
        } @else {
          <app-spinner></app-spinner>
        }
        <mat-paginator [length]="pagingInfo().totalCount" [pageSize]="pagingInfo().pageSize"
          [pageSizeOptions]="[10, 20, 50]" (page)="onPageChange($event)">
        </mat-paginator>
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
